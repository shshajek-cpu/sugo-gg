# ============================================================================
# AION2 Tool - Environment Variables Configuration
# ============================================================================

# Database Configuration
DATABASE_URL=postgresql://user:password@db/aion2

# Redis Configuration
REDIS_URL=redis://redis:6379/0

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# ============================================================================
# External Source Adapter Configuration
# ============================================================================

# Adapter Type
# - "dummy": Safe fallback mode (generates dummy data)
# - "external": Production mode (fetches from external source)
SOURCE_ADAPTER_TYPE=dummy

# ============================================================================
# HTTP Timeout Settings (seconds)
# ============================================================================

# Connection timeout (time to establish connection)
# Recommended: 2.0 - 5.0 seconds
EXTERNAL_CONNECT_TIMEOUT=3.0

# Read timeout (time to receive response)
# Recommended: 5.0 - 15.0 seconds
EXTERNAL_READ_TIMEOUT=10.0

# ============================================================================
# Retry Configuration
# ============================================================================

# Maximum number of retry attempts
# Recommended: 2 - 3 attempts
EXTERNAL_MAX_RETRIES=3

# Minimum wait time between retries (seconds)
# Uses exponential backoff: wait = min(RETRY_MIN_WAIT * 2^attempt, RETRY_MAX_WAIT)
EXTERNAL_RETRY_MIN_WAIT=1

# Maximum wait time between retries (seconds)
EXTERNAL_RETRY_MAX_WAIT=10

# ============================================================================
# Redis Cache Configuration
# ============================================================================

# Enable/disable external source caching
# Recommended: true (significantly reduces external API calls)
EXTERNAL_CACHE_ENABLED=true

# Cache TTL (Time To Live) in seconds
# Recommended: 30 - 120 seconds for character data
# - Lower values: More fresh data, more external calls
# - Higher values: Less fresh data, fewer external calls
EXTERNAL_CACHE_TTL=60

# ============================================================================
# Rate Limiting Configuration
# ============================================================================

# Enable/disable rate limiting
# Recommended: true (protects external source from overload)
EXTERNAL_RATE_LIMIT_ENABLED=true

# Rate limit window (seconds)
# Minimum time between requests for the same character
# Recommended: 30 - 60 seconds
EXTERNAL_RATE_LIMIT_WINDOW=60

# ============================================================================
# External Source Details
# ============================================================================

# Base URL for external character data source
# Update this with the actual external API/scraping endpoint
EXTERNAL_SOURCE_URL=https://aion.plaync.com/search

# User-Agent header for HTTP requests
# Use a realistic browser User-Agent to avoid detection
EXTERNAL_USER_AGENT="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# ============================================================================
# RECOMMENDED PRODUCTION SETTINGS
# ============================================================================

# For production with external source:
# SOURCE_ADAPTER_TYPE=external
# EXTERNAL_CONNECT_TIMEOUT=3.0
# EXTERNAL_READ_TIMEOUT=10.0
# EXTERNAL_MAX_RETRIES=3
# EXTERNAL_CACHE_ENABLED=true
# EXTERNAL_CACHE_TTL=60
# EXTERNAL_RATE_LIMIT_ENABLED=true
# EXTERNAL_RATE_LIMIT_WINDOW=60

# For development/testing:
# SOURCE_ADAPTER_TYPE=dummy
# (Other settings don't matter when using dummy adapter)

# ============================================================================
# PERFORMANCE TUNING GUIDELINES
# ============================================================================

# High-traffic scenario (many users):
# - EXTERNAL_CACHE_TTL=90-120 (longer cache)
# - EXTERNAL_RATE_LIMIT_WINDOW=60 (prevent abuse)
# - EXTERNAL_MAX_RETRIES=2 (fail faster)

# Low-traffic scenario (few users, need fresh data):
# - EXTERNAL_CACHE_TTL=30 (shorter cache)
# - EXTERNAL_RATE_LIMIT_WINDOW=30 (allow more frequent updates)
# - EXTERNAL_MAX_RETRIES=3 (try harder to succeed)

# Unreliable external source:
# - EXTERNAL_CONNECT_TIMEOUT=5.0 (more patience)
# - EXTERNAL_READ_TIMEOUT=15.0 (more patience)
# - EXTERNAL_MAX_RETRIES=3 (try harder)

# Fast external source:
# - EXTERNAL_CONNECT_TIMEOUT=2.0 (fail faster)
# - EXTERNAL_READ_TIMEOUT=5.0 (fail faster)
# - EXTERNAL_MAX_RETRIES=2 (don't waste time)
